<% layout('layouts/boilerplate') %>

<div class="card my-3">
    <div class="row">
        <div class="col-12">
            <img style="width:100%; height:600px;" src="<%= state.image.url %>" alt="" class="card-img-top">
        </div>
        <div class="col-5">
            <div class="card-body">
                <h1 class="card-title">State: <%= state.state%>
                </h1>
                <p class="card-body">Description: <%= state.description %>
                </p>
                <a href="/states/<%= state._id%>/places/new" class="btn btn-info my-3">Add a place</a>
                <a href="/states" class="btn btn-secondary">Back</a>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <% for (let place of state.place) {%>
        <div class="col-4">
            <div class="card shadow m-1 bg-dark text-white">
                <div id="carouselExampleControlsNoTouching" class="carousel slide" data-bs-ride="carousel">
                    <div class="carousel-inner">
                        <% place.images.forEach((img,i) => {%>
                            <div class="carousel-item <%= i === 0 ? 'active' : ''%>">
                                <img class="d-block w-100 card-img-top" src="<%= img.url %>" >
                            </div>
                            <%})%>
                    </div> 
                    <% if (place.images.length > 1) {%>
                        <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleInterval" data-bs-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">Previous</span>
                        </button>
                        <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleInterval" data-bs-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">Next</span>
                        </button>
                        <%}%>    
                </div>
                <div class="card-body">
                    <h5 class="card-title">Title : <%= place.title %></h5>
                    <h5 class="card-title">City : <%= place.city %></h5>
                    <a href="/states/<%= state._id%>/view/<%= place._id %>" 
                        class="card-link btn btn-secondary m-2">View: <%= place.title %></a>
                    <form action="/states/<%= state._id%>/<%= place._id %>?_method=DELETE" method="POST" class="d-inline">
                        <button class="btn btn-danger m-2">Delete</button>
                    </form>
                </div>
            </div>
        </div>
        <%}%>
</div>


<!-- <div class="card border p-2 w-100">
    <div class="row">
        <% for (let place of state.place) {%>
            <div class="col-md-4 mb-3">
                <div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
                    <div class="carousel-inner">
                        <% place.images.forEach((img, i) => {%>
                        <div class="carousel-item <%= i === 0 ? 'active' : ''%>">
                            <img class="d-block w-100 card-img-top" src="<%= img.url %>" >
                        <%}) %>
                    </div>
                </div>
                <% if (place.images.length > 1) {%>
                    <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="sr-only">Previous</span>
                    </a>
                    <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="sr-only">Next</span>
                    </a>
                <%} %>
            </div>
            <div class="card-body border">
                <h5 class="card-title">Title : <%= place.title %></h5>
                <h5 class="card-title">City : <%= place.city %></h5>
                <a href="/states/<%= state._id%>/view/<%= place._id %>" class="card-link btn btn-secondary m-2">View
                    : <%= place.title %></a>
                <form action="/states/<%= state._id%>/<%= place._id %>?_method=DELETE" method="POST"
                    class="d-inline">
                    <button class="btn btn-danger m-2">Delete</button>
                </form>
            </div>
            </div>
    </div>
        <%}%>
</div> -->


